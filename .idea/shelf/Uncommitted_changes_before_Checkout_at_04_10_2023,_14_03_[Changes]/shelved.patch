Index: main.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\nimport requests\nfrom urllib.request import urlopen\nfrom json import load\n\n\nOPENWEATHERMAP_APPID = \"79d1ca96933b0328e1c7e3e7a26cb347\"\n\n\ndef run():\n    ip = get_ip()\n    city = get_city(ip)\n    weather = get_weather(city)\n    print(weather)\n\n\ndef get_weather(city):\n    \"\"\"Return a string telling the weather in a particular city\"\"\"\n\n    url = 'https://api.openweathermap.org/data/2.5/weather?q=' + \\\n          city + \\\n          '&units=metric&lang=ru&appid=' + \\\n          OPENWEATHERMAP_APPID\n\n    weather_data = requests.get(url).json()\n\n    temperature = round(weather_data['main']['temp'])\n    temperature_feels = round(weather_data['main']['feels_like'])\n\n    msg = (f\"Temperature in {city}: {str(temperature)} °C\\n\"\n           f\"Feels like {str(temperature_feels)} °C\")\n    return msg\n\n\ndef get_city(ip):\n    \"\"\"Get user's city based on their IP\"\"\"\n\n    ip_address = ip\n    url = 'https://ipinfo.io/' + ip_address + '/json'\n    response = urlopen(url)\n    json = load(response)\n    return json[\"city\"]\n\n\ndef get_ip():\n    \"\"\"Get user's IP\"\"\"\n\n    response = requests.get('https://api64.ipify.org?format=json').json()\n    return response[\"ip\"]\n\n\nif __name__ == '__main__':\n    run()\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/main.py b/main.py
--- a/main.py	
+++ b/main.py	
@@ -1,7 +1,5 @@
 
 import requests
-from urllib.request import urlopen
-from json import load
 
 
 OPENWEATHERMAP_APPID = "79d1ca96933b0328e1c7e3e7a26cb347"
@@ -37,9 +35,8 @@
 
     ip_address = ip
     url = 'https://ipinfo.io/' + ip_address + '/json'
-    response = urlopen(url)
-    json = load(response)
-    return json["city"]
+    response = requests.get(url).json()
+    return response["city"]
 
 
 def get_ip():
