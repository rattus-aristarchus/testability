Index: main.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\nimport requests\nfrom urllib.request import urlopen\nfrom json import load\n\n\ndef weather(city):\n    \"\"\"Return a string telling the weather in a particular city\"\"\"\n\n    url = 'https://api.openweathermap.org/data/2.5/weather?q=' + \\\n          city + \\\n          '&units=metric&lang=ru&appid=79d1ca96933b0328e1c7e3e7a26cb347'\n\n    weather_data = requests.get(url).json()\n\n    temperature = round(weather_data['main']['temp'])\n    temperature_feels = round(weather_data['main']['feels_like'])\n\n    msg = (f\"Temperature in {city}: {str(temperature)} °C\\n\"\n           f\"Feels like {str(temperature_feels)} °C\")\n    return msg\n\n\ndef get_ip():\n    \"\"\"Get user's IP\"\"\"\n\n    response = requests.get('https://api64.ipify.org?format=json').json()\n    return response[\"ip\"]\n\n\ndef get_city(ip):\n    \"\"\"Get user's city based on their IP\"\"\"\n\n    ip_address = ip\n    url = 'https://ipinfo.io/' + ip_address + '/json'\n    response = urlopen(url)\n    json = load(response)\n    return json[\"city\"]\n\n\nif __name__ == '__main__':\n    print(weather(get_city(get_ip())))\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/main.py b/main.py
--- a/main.py	(revision 0f4971c4ec6fb897898b21bac5cff099838ab74c)
+++ b/main.py	(date 1696243314358)
@@ -1,10 +1,20 @@
-
 import requests
-from urllib.request import urlopen
-from json import load
+
+from city import Location, IPInfo
 
 
-def weather(city):
+def run():
+    get_local_weather(IPInfo())
+
+
+def get_local_weather(location: Location):
+    ip = get_ip()
+    city = location.get(ip)
+    weather = get_weather(city)
+    print(weather)
+
+
+def get_weather(city):
     """Return a string telling the weather in a particular city"""
 
     url = 'https://api.openweathermap.org/data/2.5/weather?q=' + \
@@ -28,16 +38,5 @@
     return response["ip"]
 
 
-def get_city(ip):
-    """Get user's city based on their IP"""
-
-    ip_address = ip
-    url = 'https://ipinfo.io/' + ip_address + '/json'
-    response = urlopen(url)
-    json = load(response)
-    return json["city"]
-
-
 if __name__ == '__main__':
-    print(weather(get_city(get_ip())))
-
+    run()
Index: city.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/city.py b/city.py
new file mode 100644
--- /dev/null	(date 1696238541112)
+++ b/city.py	(date 1696238541112)
@@ -0,0 +1,19 @@
+from abc import ABC, abstractmethod
+from urllib.request import urlopen
+from json import load
+
+
+class Location(ABC):
+
+    @abstractmethod
+    def get(self, ip):
+        pass
+
+
+class IPInfo(Location):
+
+    def get(self, ip):
+        url = 'https://ipinfo.io/' + ip + '/json'
+        response = urlopen(url)
+        json = load(response)
+        return json["city"]
